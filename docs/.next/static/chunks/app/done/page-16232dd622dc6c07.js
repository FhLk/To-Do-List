(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[362],{5221:function(t,e,s){Promise.resolve().then(s.bind(s,9692))},9692:function(t,e,s){"use strict";s.r(e);var n=s(7437);s(2265);var c=s(8010);e.default=function(){return(0,n.jsx)("div",{children:(0,n.jsx)(c.Z,{status:"done"})})}},8010:function(t,e,s){"use strict";s.d(e,{Z:function(){return m}});var n=s(7437),c=s(2265);let a="https://todo-list-api-mfchjooefq-as.a.run.app/todo-list",o=Number(0),r=Number(10),i=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;try{let s=await fetch("".concat(a,"?status=TODO&offset=").concat(t,"&limit=").concat(e,"&sortBy=createdAt&isAsc=true"));return(await s.json()).tasks}catch(t){console.error(t)}},l=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;try{let s=await fetch("".concat(a,"?status=DOING&offset=").concat(t,"&limit=").concat(e,"&sortBy=createdAt&isAsc=true"));return(await s.json()).tasks}catch(t){console.error(t)}},d=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;try{let s=await fetch("".concat(a,"?status=DONE&offset=").concat(t,"&limit=").concat(e,"&sortBy=createdAt&isAsc=true"));return(await s.json()).tasks}catch(t){console.error(t)}};var u=s(9212),f=s.n(u),h=t=>{let{tasks:e,onDeleteTask:s}=t,[a,o]=(0,c.useState)({});(0,c.useEffect)(()=>{r()},[e]);let r=()=>{o(e.reduce((t,e)=>{let s=f()(e.createdAt).utc().format("L");return t[s]||(t[s]=[]),t[s].push(e),t},{}))},i=t=>{s(t)};return(0,n.jsx)("div",{className:"w-[700px]",children:Object.keys(a).map(t=>(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("h3",{children:t}),(0,n.jsx)("ul",{children:a[t].map(t=>(0,n.jsx)("li",{className:"my-[10px]",children:(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("h3",{children:(0,n.jsx)("strong",{children:t.title})}),(0,n.jsx)("button",{onClick:()=>i(t.id),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-l",children:"Delete"})]})},t.id))})]},t))})},m=t=>{let{status:e}=t,[s,a]=(0,c.useState)([]),[o,r]=(0,c.useState)(0),[u,f]=(0,c.useState)(!1),m=async t=>{let e=[];switch(f(!0),t){case"todo":e=await i();break;case"doing":e=await l();break;case"done":e=await d();break;default:e=[]}a(e),r(o+1),f(!1)},j=async()=>{f(!0),a([...s,...await i(o)]),r(o+1),f(!1)};(0,c.useEffect)(()=>{m(e)},[]),(0,c.useEffect)(()=>(window.addEventListener("scroll",v),()=>{window.removeEventListener("scroll",v)}),[s]);let v=()=>{window.innerHeight+document.documentElement.scrollTop===document.documentElement.offsetHeight&&(j(),console.log("Fetch more list items!"))};return(0,n.jsxs)("div",{className:"h-screen flex justify-center",children:[(0,n.jsx)(h,{tasks:s,onDeleteTask:t=>{console.log(t),a(s.filter((e,s)=>e.id!==t))}}),u&&(0,n.jsx)("div",{children:"Loading..."})]})}}},function(t){t.O(0,[990,971,23,744],function(){return t(t.s=5221)}),_N_E=t.O()}]);